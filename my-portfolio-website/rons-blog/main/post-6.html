<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> Scalable Sports API with ECS, API Gateway, and Fargate</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
        .highlight-code {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            display: block;
            /* Added to fix the issue */
        }
        
        .terminal-like {
            background-color: #333;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
            display: block;
            /* Added to fix the issue */
        }
        
        body {
            margin: 0;
            /* Remove default margin */
            padding: 0;
            /* Remove default padding */
        }
        
        header.intro-header {
            margin-top: 0;
            /*Remove the margin top from the header element*/
            padding-top: 0;
            /* Remove any default padding*/
        }
    </style>

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index.html">Back To Project List</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li>

                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('img/nfl.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Building a Scalable Sports API with ECS, API Gateway, and Fargate</h1>
                        <h2 class="subheading">My journey in building a robust, scalable API for retrieving NFL game schedules using a combination of powerful AWS services.</h2>
                        <span class="meta">Created by <a href="#">Ron-tino</a> on January 04, 2025</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div style="display: flex; flex-direction: column; align-items:center;">
                        <img src="img/nfl-1.jpg" alt="AWS Amplify" width="750" class="tutorial-image">
                    </div>

                    <p>
                        Hey tech enthusiasts! I'm excited to share my journey in building a robust, scalable API for retrieving NFL game schedules using a combination of powerful AWS services. In this project, we'll dive into the practical application of containerization, API
                        management, and serverless computing. This isn't just about theory; it's about building something real, and by the end, you'll have a functioning API.
                    </p>
                    <h2 style="color:#18a3c4">The Goal: A Scalable and Secure Sports API</h2>
                    <p>
                        Our mission is to create a custom endpoint that can deliver up-to-date NFL game schedules, formatted for easy consumption. This isn't just about fetching data; it's about creating a full-fledged API that is:
                    </p>
                    <ul style="color:#000000">
                        <li><b>Scalable:</b> Handles increasing traffic without performance bottlenecks.</li>
                        <li><b>Highly Available:</b> Ensures uninterrupted access to the service.</li>
                        <li><b>Secure:</b> Provides access control.</li>
                        <li><b>Organized:</b> Provides clean and readable data to consumers</li>
                    </ul>


                    <h2 style="color:#18a3c4">The Solution: AWS-Powered Architecture</h2>
                    <p> To achieve this, we will implement the following solution:</p>
                    <ul style="color:#000000">
                        <li><b>Containerization:</b> We will package our Python Flask application into a Docker container.</li>
                        <li><b>ECS on Fargate:</b> Amazon ECS with Fargate will be our container orchestration tool, allowing us to run our containers serverlessly.</li>
                        <li><b>Application Load Balancer (ALB):</b> The ALB will distribute traffic between our container instances ensuring high availability.</li>
                        <li><b>API Gateway:</b> This will expose our API to the outside world with added security and management capabilities.</li>
                        <li><b>SerpAPI:</b> We will use this third-party API as our data source for NFL game schedules.</li>
                    </ul>


                    <h2 style="color:#18a3c4">Architectural Overview</h2>
                    <div style="display: flex; flex-direction: column; align-items:center;">
                        <img src="img/ARCHI-NBL.png" alt="AWS Amplify" width="750" class="tutorial-image">
                    </div>

                    <p> The diagram above illustrates how we will be utilizing the different AWS services.</p>

                    <h2 style="color:#18a3c4">Technology Stack</h2>

                    <ul style="color:#000000">
                        <li><b>Cloud Provider:</b> AWS</li>
                        <li><b>Containerization:</b> Docker</li>
                        <li><b>Orchestration:</b> Amazon ECS (Fargate)</li>
                        <li><b>Load Balancing:</b> Application Load Balancer (ALB)</li>
                        <li><b>API Management:</b> Amazon API Gateway</li>
                        <li><b>Programming Language:</b> Python</li>
                        <li><b>Data Source:</b> SerpAPI</li>
                    </ul>

                    <h2 style="color:#18a3c4">Code Deep Dive</h2>
                    <p>The project is structured as follows:</p>
                    <pre class="terminal-like">
                            <code>
                            sports-api-management/
                            ├── app.py       # Flask application for querying sports data
                            ├── Dockerfile  # Dockerfile to containerize the Flask app
                            ├── requirements.txt # Python dependencies
                            ├── .gitignore
                            └── README.md  # Project documentation
                            </code>
                        </pre>
                    <p>Here's what each file is responsible for:</p>
                    <ul style="color:#000000">
                        <li><b>`app.py`</b>: This Python file holds our Flask application. It defines a `/sports` endpoint that when accessed, fetches data from SerpAPI, formats the data and returns a JSON response.</li>
                        <li><b>`Dockerfile`</b>: This file defines the steps to build the container image. This includes using a base Python image, installing dependencies, copying application files, and exposing port 8080.</li>
                        <li><b>`requirements.txt`</b>: Lists the project's Python dependencies, in this case, Flask and Requests.</li>
                    </ul>

                    <h2 style="color:#18a3c4">Hands-On Implementation</h2>

                    <p> Follow these steps to build your sports API:</p>
                    <h3 style="color:#000000">1. Clone the Repository</h3>
                    <pre class="terminal-like">
                            <code>
                            git clone <a href="https://github.com/ifeanyiro9/containerized-sports-api.git">https://github.com/ifeanyiro9/containerized-sports-api.git</a>
                            cd containerized-sports-api
                            </code>
                        </pre>
                    <h3 style="color:#000000">2. Create an ECR Repository</h3>
                    <pre class="terminal-like">
                            <code>
                            aws ecr create-repository --repository-name sports-api --region us-east-1
                            </code>
                         </pre>
                    <h3 style="color:#000000">3. Build and Push the Docker Image</h3>
                    <p>Make sure you are logged into AWS ECR using the login command provided by the AWS CLI after you created the ECR Repository. You will have to change the account ID in the following command to your AWS Account ID.</p>
                    <pre class="terminal-like">
                            <code>
                            aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <YOUR_AWS_ACCOUNT_ID>.dkr.ecr.us-east-1.amazonaws.com
                            
                            docker build --platform linux/amd64 -t sports-api .

                            docker tag sports-api:latest <YOUR_AWS_ACCOUNT_ID>.dkr.ecr.us-east-1.amazonaws.com/sports-api:sports-api-latest
                            docker push <YOUR_AWS_ACCOUNT_ID>.dkr.ecr.us-east-1.amazonaws.com/sports-api:sports-api-latest
                            </code>
                         </pre>
                    <p><b>Note:</b> Be sure to replace `
                        <YOUR_AWS_ACCOUNT_ID>` with your actual AWS account ID.</p>
                    <div style="display: flex; flex-direction: column; align-items:center;">
                        <img src="img/ecr.png" alt="AWS Amplify" width="750" class="tutorial-image">
                    </div>

                    <h3 style="color:#000000">4. Set Up ECS Cluster with Fargate</h3>
                    <ul style="color:#000000">
                        <li>Go to ECS Console → Clusters → Create Cluster.</li>
                        <li>Name your Cluster (e.g., `sports-api-cluster`).</li>
                        <li>Choose Fargate as your Infrastructure.</li>
                        <li>Create the cluster.</li>
                    </ul>
                    <div style="display: flex; flex-direction: column; align-items:center;">
                        <img src="img/ecs.png" alt="AWS Amplify" width="750" class="tutorial-image">
                    </div>

                    <h3 style="color:#000000">5. Create ECS Task Definition</h3>
                    <ul style="color:#000000">
                        <li>Go to Task Definitions → Create New Task Definition.</li>
                        <li>Name it (e.g., `sports-api-task`).</li>
                        <li>Select Fargate as your Infrastructure.</li>
                        <li>Add the container with:
                            <ul>
                                <li>Name: `sports-api-container`</li>
                                <li>Image URI: `
                                    <YOUR_AWS_ACCOUNT_ID>.dkr.ecr.us-east-1.amazonaws.com/sports-api:sports-api-latest`</li>
                                <li>Port mapping: `8080`</li>
                                <li>Environment variables: Key: `SPORTS_API_KEY`, Value: `
                                    <YOUR_SPORTSDATA.IO_API_KEY>`</li>
                            </ul>
                        </li>
                        <li>Create the task definition.</li>
                    </ul>
                    <div style="display: flex; flex-direction: column; align-items:center;">
                        <img src="img/task-def.png" alt="AWS Amplify" width="750" class="tutorial-image">
                    </div>

                    <h3 style="color:#000000">6. Run the Service with an ALB</h3>
                    <ul style="color:#000000">
                        <li>Go to Clusters → Select your cluster → Service → Create.</li>
                        <li>Capacity provider: Fargate.</li>
                        <li>Select the task definition family you just created.</li>
                        <li>Name your service (e.g., `sports-api-service`).</li>
                        <li>Set desired task to 2.</li>
                        <li>Create a new security group with an open rule for all TCP for demo purposes (not recommended for production).</li>
                        <li>Select Application Load Balancer (ALB) for load balancing.</li>
                        <li>Create a new ALB (e.g., `sports-api-alb`).</li>
                        <li>Set Target Group health check path to `/sports`.</li>
                        <li>Create the service.</li>
                    </ul>
                    <h3 style="color:#000000">7. Test the ALB</h3>
                    <ul style="color:#000000">
                        <li>After the service deploys note the DNS name of the ALB e.g. `sports-api-alb-
                            <YOUR_AWS_ACCOUNT_ID>.us-east-1.elb.amazonaws.com`</li>
                        <li>Confirm the API is accessible by adding `/sports` to the end of the ALB DNS in a browser. e.g. `http://sports-api-alb-
                            <YOUR_AWS_ACCOUNT_ID>.us-east-1.elb.amazonaws.com/sports`</li>
                    </ul>

                    <h3 style="color:#000000">8. Configure API Gateway</h3>
                    <ul style="color:#000000">
                        <li>Go to API Gateway Console → Create API → REST API.</li>
                        <li>Name the API (e.g., Sports API Gateway).</li>
                        <li>Create resource `/sports` and a GET method.</li>
                        <li>Choose HTTP Proxy as integration type and enter the ALB DNS name including `/sports` e.g. `http://sports-api-alb-
                            <YOUR_AWS_ACCOUNT_ID>.us-east-1.elb.amazonaws.com/sports`.</li>
                        <li>Deploy to a stage (e.g., `prod`).</li>
                        <li>Note the endpoint URL.</li>
                    </ul>
                    <h3 style="color:#000000">9. Test Your API</h3>
                    <pre class="terminal-like">
                            <code>
                                 curl https://<api-gateway-id>.execute-api.us-east-1.amazonaws.com/prod/sports
                            </code>
                        </pre>
                    <h2 style="color:#18a3c4">What We Learned</h2>

                    <ul style="color:#000000">
                        <li><b>Hands-on containerization:</b> How to package an application using Docker.</li>
                        <li><b>Serverless deployment:</b> How to use ECS with Fargate to run applications.</li>
                        <li><b>Load Balancing:</b> How to use an ALB to distribute traffic and ensure high availability.</li>
                        <li><b>API Management:</b> How to expose APIs securely using API Gateway.</li>
                    </ul>

                    <h2 style="color:#18a3c4">Future Enhancements</h2>
                    <ul style="color:#000000">
                        <li>Add caching for frequent API requests using Amazon ElastiCache.</li>
                        <li>Store user-specific queries with DynamoDB.</li>
                        <li>Enhance API security with API keys or IAM-based authentication.</li>
                        <li>Implement CI/CD for automated deployments.</li>
                    </ul>

                    <h2 style="color:#18a3c4">Conclusion</h2>

                    <p>
                        This project demonstrates a modern approach to building and managing APIs in the cloud, combining the power of containers, serverless computing, and robust API management. Feel free to use this project as a stepping stone for other complex applications
                        and services. Share your feedback below if you have any questions or insights!
                    </p>

                </div>
            </div>
        </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://x.com/Nightwalka11" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/@Ron_can_cloud" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.ron-tino.site/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-globe fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Nightwalka" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/ronald-tino-027a6122b" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright © 2024 Ron-Tino</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>